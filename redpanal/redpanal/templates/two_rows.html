{% extends "base.html" %}
{% load i18n %}

{% block extra_head %}
{{ block.super }}
 <script>

    //var sliderHeight = "100px";

    $(function (){
        $('video,audio').each(function(index, element){
            // console.log("width" + index + ": " + $(this).parent().width()); //debug
            $(this).mediaelementplayer({
               audioWidth: $(this).parent().width(), //old 540 460
               // height of audio player
               audioHeight: 30,
               // initial volume when the player starts
               startVolume: 0.8});
        });

        $('.partial_slider').each(function(){

            var s = $(this).find('.slider');
            var m = $(this).find('.slider_menu');

            var minH = s.css('min-height');
            var maxH = s[0].scrollHeight + "px"; 
            var eleH = s.height() + "px";
            //console.log( "minH:" + minH + " eleH:" + eleH + " maxH:" + maxH ); //debug

            if ( maxH > minH ) {
               // set initial height if not
               if ( eleH != minH ) s.css("height", minH );

               // create toogle menu
               var a = $('<a href="#"><i class="fa fa-angle-down"></i> more</a>');
               m.append(a);

               // toogle function
               var open = false;
               a.click(function(){
                  if ( open == true ){
                     s.animate({"height": minH}, {duration: "slow" });
                     a.html('<i class="fa fa-angle-down"></i> more');
                     open = false;
                  } else {
                     s.animate({"height": maxH}, {duration: "slow" });
                     a.html('<i class="fa fa-angle-up"></i> close');
                     open = true;
                  }
               })
            }
        });
    });

 </script>
{% endblock %}

{% block content %}
<div class="row">
  <div class="main span7">
    {% comment %}
    {% block comment %}
      {% if request.user.is_authenticated %}
        {% include "social/message_form.html" %}
      {% endif %}
    {% endblock %}
    {% endcomment %}
      {% block left_row %}{% endblock %}
  </div>

  <div class="sidebar span5">
      {% block right_row %}{% endblock %}
  </div>
</div>
{% endblock %}

