{% extends "two_rows.html" %}
{% load i18n avatar_tags social %}

{% block title %}<span class="icon-user"></span> @{{ user.username }} {% trans "profile" %}{% endblock %}

{% block extra_head %}
{{ block.super }}
 <script src="{{ STATIC_URL }}endless_pagination/js/endless-pagination.js"></script>
 <script>
    $(function (){
        $('video,audio').mediaelementplayer({
            audioWidth: 460,
            // height of audio player
            audioHeight: 30,
            // initial volume when the player starts
            startVolume: 0.8});

        $.endlessPaginate({
            paginateOnScroll: true,
            paginateOnScrollChunkSize: 5,
            paginateOnScrollMargin: 10
        });
    });
 </script>
{% endblock %}

{% block left_row %}
      {% ifequal request.user user %}
      <h3 class="top-title">{% trans "About me" %}</h3>
      {% else %}
      <h3 class="top-title">{% trans "About" %} @{{ user.username }}</h3>
      {% endifequal %}

      <div class="user-page-top">
         <span class="user-about">{% if user.userprofile.about %}{{ user.userprofile.about }}{% else %}{% trans 'Sorry, still not put anything in my description' %}{% endif %}</span><br />
         <span class="user-location"><i class="fa fa-map-marker"></i> {% if user.userprofile.location %}{{ user.userprofile.location }}{% else %}{% trans "from somewhere in the universe" %}{% endif %}</span>
         {% with object=user.userprofile %} <span class="tags">{% include 'core/hashtags_block.html' %}</span>{% endwith %}
      </div>

      <h3>{% trans "Last tracks" %}</h3>
      {% for object in audios|slice:":5" %}
         {% include "audio/audio_teaser.html" %}
      {% empty %}
            <span class="no-yet">{% trans "No tracks yet" %}</span>
        {% ifequal request.user user %}
            <span class="new"><a href="{% url "audio-create" %}">{% trans "Upload track" %}</a></span>
        {% endifequal %}
      {% endfor %}

      <span class="more"><a href="#user tracks">more</a></span>

      <h3>{% trans "Last activities" %}</h3>
       {# include "social/actions_list.html" #}
      <ul class="action-stream">
         {% for action in action_list|slice:":5" %}
            <li>{% include 'social/action_teaser.html' %}</li>
         {% empty %}
            <span class="no-yet">{% trans "No actions yet" %}</span>
         {% endfor %}
      </ul>
      <span class="more"><a href="#user tracks">more</a></span>

      <h3>{% trans "Last projects" %}</h3>
      <div class="projects-wrapper">
         {% for object in user.project_set.all|slice:":5" %}
            {% include "project/project_teaser.html" %}
         {% empty %}
               <span class="no-yet">{% trans "No project yet" %}</span>
            {% ifequal request.user user %}
               <span class="new"><a href="{% url "project-create" %}">{% trans "Create new project" %}</a></span>
            {% endifequal %}
         {% endfor %}
      </div>

      <span class="more"><a href="#user tracks">more</a></span>

{% endblock %}

{% block right_row %}
   {% if request.user.is_authenticated %}
       <ul class="nav nav-list auth-user">
         {% include "auth-items-menu.html" %}
       </ul>
   {% endif %}
    {% include "users/user_stats.html" %}
    <ul class="nav nav-list">
      {% include "not-auth-items-menu.html" %}
    </ul>
    <ul class="nav nav-list">
      {% include "discover-items-menu.html" %}
    </ul>
{% endblock %}

